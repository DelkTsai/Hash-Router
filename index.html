<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Hash-Router by Michael Sogos</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/michaelsogos/Hash-Router">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Hash-router</h1>
            <h2>Tiny and lightweight browser router library, developed with SPA in mind :)</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/michaelsogos/Hash-Router/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/michaelsogos/Hash-Router/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Welcome to Hash-Router Pages.</h3>
<p>To understand why i create this library take a look to <code>README.md</code> or to the main page on github.</p>
<p>A little excerpt!<br/>
With this library you can manage browser url and create your custom browsing path rules;
  this library give you everything you need to parse hash parts, querystring key-values, listening for any url-hash changes running
  your code.<br/>
  <h6>What this library does that the other libraries don't do is a great (im my opinion :)) support for lazy loading concept,
  a perfect companion for <abbr title="Single Page Application">SPA</abbr> with lazy loading mechanism.</h6><br/>
  But remember that this library don't tell you how to lazy load files, only support the concept independently on choosen mechanism,
  you can use this library without any lazy loading engine too :) like any javascript router.
</p>


<h4>Getting Started</h4>

<p>Any route rule must have an <b>path:</b> and a at least one callback function <b>:before</b>, <b>:on</b>, <b>:after</b>.</p>
<pre><code>//route definition
var route = {
  path: '#/',
  on: function() { ... }
}
</code></pre>

<p>The rule can be customized as you want.</p>
<pre><code>//complex route definition
var route = {
  path: '#/',
  before: function() { ... },
  on: function() { ... },
  after: function() { ... },
  config: {
    k:v,
    ...
  }
}
</code></pre>

<p>Add rule to route.</p>
<pre><code>//add rule
Router.add(route);
</code></pre>

<p>Initialize router to start listening url-hash changes.</p>
<pre><code>//init rule
Router.init();
</code></pre>

<h4>Route Definition</h4>
<p>A route definition is a simple object that have to contain a property <code>path</code> and at least one callback function
  <code>before</code>, <code>on</code> and <code>after</code>.
</p>
<pre><code>//route definition
var route = {
  path: '#/',
  on: function() { ... }
}
</code></pre>
<p>A route definition can be easily customized to contain any object that will be passed to callback function.</p>
<pre><code>//complex route definition
var route = {
  path: '#/',
  before: function() { 
    //The [this] object is a copy of the [route] object plus:
    //this.params containing hash tokens
    //this.event containing data about function execution
    //this.task containing methods to manage functions execution
    //this.url containing the original url hash
    //this.query containing the querystring parameters
  },
  on: function() { ... },
  after: function() { ... },
  config: {
    namespace:'myNameSpace',
    controller: 'myController',
    ...
  }
}
</code></pre>
<p>The path property can be a normal static hash like <code>#/access/login</code>
or a parametrized string like <code>#/blog/:date/:slug</code>, in this case the route parameters will be completed with
hash tokens.
</p>
<pre><code>//if my url is http://localhost/blog/20140101/hello-world
var route = {
  path: '#/blog/:date/:slug',
  on: function() { 
    //this.params.date contains '20140101'
    //this.params.slug contains 'hello-world'
  },
}
</code></pre>
<p>There are four reserved property that you can't use to extend the route definition.</p>
<p>
  The <code>params</code> containing route parameters.<br/>
  The <code>query</code> containing querystring parameters.<br/>
  The <code>url</code> containing the original hash.<br>
  The <code>event</code> containing two property: <code>state</code> indicating which function is executing (before, on, after) 
  and <code>previousResult</code> containing the value returned from previous function.<br/>
  The <code>task</code> containing only a method <code>done()</code> that is mandatory to call inside the function to
  instructs the router task manager to execute next function.
</p>
<p>The task is very useful in the scenaries where a function make an async call (like ajax), 
it help you on choose when execute next function.
</p>
<pre><code>//task use example
var route = {
  path: '#/',
  before: beforeFunction,
  on: onFunction,
}

//not using task
var beforeFunction = function(){
  //something to do
  // no call to this.task.done()
}

var onFunction = function(){
  //execution never reach this
}

//but if ... use task
var beforeFunction = function(){
  //something to do
  this.task.done();
}

var onFunction = function(){
  //execution reach this :)
  //this.event.previousResult = null
}

//but if ... use task in this way
var beforeFunction = function(){
  //something to do
  this.task.done('an object to pass to next function');
}

var onFunction = function(){
  //execution reach this :)
  //this.event.previousResult = 'an object to pass to next function'
}

//an ajax example
var beforeFunction = function(){
  //use jquery ajax implementation
  $.ajax({
  async:true,
  url: '...',
  success: function(data){
    this.task.done(data);
  },
  error: function(request){
    this.taks.done('error');
  });
}

var onFunction = function(){
  //execution reach this only after ajax request is completed :)
  //this.event.previousResult = ajax result
}
</code></pre>

<h4>init(), init(onRouteChange,OnRouteNotFound)</h4>
<p><b>Start to listen for url-hash changes.</b></p>
<p>If page starts with no hash <code>(http://website/)</code> then the router redirect to default empty hash <code>(http://website/#/)</code>, 
else if the page is called with hash <code>(http://website/#/blog)</code> then the router run the functions specified on matching rule.</p>
<p>Pay attention when you call <code>init()</code> method, the suggestion is after dom is ready and after any bootstrap js code is executed.</p>
<p>The init method can be called with a function that will be executed before the first route function is called.</p>
<p>The init method can be called with a function that will be executed when no route match the url hash, this is useful on lazy
  loading scenary because if no route match existing rules probabily you have to lazy load new js file containing missed rules.<br/>
  Because this library supports lazy loading but leave to developers to choose the right mechanism, the only value passed to the
  callback function is an array of hash parts, without '#' <code>Ex. #/account/login = [account][login]</code>.<br/>
  An example is the MVC pattern + "Lazy Loading Controller" concept; the controller should be responsible for its routes,
  so you have to load controller js file and then register the routes with <code>Router.add()</code> method.<br/>
  But if you prefer you can use it to catch NotFound errors :)
</p>
<pre><code>//init rule with onRouteChange
var onChangeRoute = function(route){
// do something
};
Router.init(onChangeRoute);

//init rule with onRouteNotFound
var onNotFound = function(tokens){
//when a url hash not match with any existing routes (ex. #/access/login)
//this function will be called with array = ['access','login']
//now i can assume for convention that array[0] is the name of my controller
//and with a library that help to load external static file, i can load my controller and register its routes

  $.scripts('/app/controllers/'+token[0]+'.js', function(){
    var loadedController = new window[token[0]]();
    $.each(loadedController.routes, function(index,item){
      Router.add(item,true);
    });
  });

}
Router.init(null,onNotFound);
</code></pre>

<h4>add(route), add(route,overwrite)</h4>
<p><b>Add a rule.</b></p>
<p>If a rule with the same <code>path</code> already exist, then it will be ignored.</p>
Is possible to overwrite the existing rules passing <code>true</code> to <code>overwrite</code> parameter.</p>
<p>Can exist only a rule for the same <code>path</code>.</p>
<pre><code>//add rule
var route = {...}
Router.add(route);
//add rule overwriting existing
Router.add(route,true);
</code></pre>

<h4>navigate(hash)</h4>
<p><b>Change the url hash and run functions defined in rule matching path property.</b></p>
<pre><code>//navigate to hash passed as first argument
Router.navigate('#/access/login');
</code></pre>

<h4>run(route)</h4>
<p><b>Execute functions defined in the route.</b></p>
<pre><code>//execute functions defined in rule passed as first argument
var route = {
  path: '#/',
  before: beforeFunction,
  on: onFunction,
}
Router.run(route);
</code></pre>

<h4>findRoute(path)</h4>
<p><b>Find a route by path property.</b></p>
<pre><code>//find route by path passed as first argument
var route = {
  path: '#/blog/:date/:slug',
  before: beforeFunction,
  on: onFunction,
}
var foundRoute = Router.findRoute('#/blog/:date/:slug');
</code></pre>

<h4>matchRoute(hash)</h4>
<p><b>Find a route definition by path property matching the value passed as first argument.</b></p>
<pre><code>//find route that match path property
var route = {
  path: '#/blog/:date/:slug',
  before: beforeFunction,
  on: onFunction,
}
var foundRoute = Router.matchRoute('#/blog/20140101/hello-world');
</code></pre>


<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>
<p>A great thanks for the works that inspired me to the developers of:<br/>
<a href="https://github.com/mtrpcic/pathjs">path.js</a><br/>
<a href="https://github.com/quirkey/sammy">sammy.js</a><br/>
<a href="https://github.com/flatiron/director">director.js</a>
</p>
<p>
I will continue to update and maintain this library, and to evolve thanks to your feedbacks.<br/>
<br/>
Michael Sogos, here for serve you :)
</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>
<p>Having trouble with my library? After read documentation in this page you can send me an issue on <a href="https://github.com/michaelsogos/Hash-Router">GitHub</a></p>
<p>Any feedback about a new function/behaviour/idea is appreciated.</p>
      
        
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/michaelsogos">Michael Sogos</a> can be found on <a href="https://github.com/michaelsogos/Hash-Router">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
